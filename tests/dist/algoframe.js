!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AlgoFrame=e():t.AlgoFrame=e()}(self,(()=>(()=>{"use strict";var t={895:function(t,e,i){var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(448)),o=s(i(784));i(686);let h=new a.Keyframes([new a.Keyframes.keyframe(0,0),new a.Keyframes.keyframe(1,1)],"linear");h=new o.Sequence(1e3,[new o.valueKeyframe(1,0,"ratio"),new o.valueKeyframe(0,.5,"ratio"),new o.valueKeyframe(.5,1,"ratio")]);const u=new a.AlgoFrame(1e3,500,"linear",h);new o.Sequence(500,[new o.valueKeyframe(0,.2,"ratio"),new o.valueKeyframe(1,100,"miliseconds")]).addKeyframe(new o.valueKeyframe(0,0,"ratio")),u.run(console.log)},784:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChannelsTimeline=e.Sequence=e.nestedKeyframe=e.valueKeyframe=void 0;const n=i(626);class r{constructor(t,e="ratio",i){this.timing=t,this.type=e,this.delay=i,this.id=r.instances++}time(t){if(this.delay){if(!this.duration)throw new Error("Keyframe with delay has to have duration setted");this.timing="ratio"===this.type?function(t,e,i){return t*i+e}(this.timing,this.delay,this.duration):this.timing+this.delay}if(!this.duration)throw new Error("Need to set this.duration to each keyframe in the keyframes manager");return"miliseconds"===this.type?this.timing/(this.duration/t):t*this.timing}}r.instances=0;class s extends r{constructor(t,e,i="miliseconds"){super(e,i),this.value=t}}e.valueKeyframe=s;class a extends r{constructor(t,e,i="miliseconds"){super(e,i),this.obj=t}}e.nestedKeyframe=a;class o{constructor(t,e="linear"){this.next=null,this.current=null,this.duration=Math.floor(t),this.run=[],this.easing=(0,n.passPreset)(e)}nextTime(){this.run.length?(this.run.length>1?(this.current=this.run.reduce(((t,e)=>e.time(this.duration)<t.time(this.duration)?e:t)),this.next=this.run.filter((t=>t.time(this.duration)!==this.current.time(this.duration))).reduce(((t,e)=>e.time(this.duration)<t.time(this.duration)?e:t))||this.current):this.restart(),this.run.shift()):this.next=null}passKeyframe(t){return t instanceof a||t instanceof s?t:this.is_value(t)?new s(t.value,t.timing,t.type):new a(t.obj,t.timing,t.type)}is_value(t){return"val"in t}restart(){for(;this.run.length;)this.run.pop();this.reset()}static lerp(t,e,i){return t*(1-i)+e*i}test(t,e=!1){if(e&&(t*=this.duration),this.next&&this.current){if(this.next.time(1)<=t&&this.nextTime(),this.next instanceof s&&this.current instanceof s){t=Math.min(this.easing(t),e?this.duration:1);const i=this.next.time(1)-this.current.time(1),n=t/i;return o.lerp(this.current.value,this.next.value,t<i?n:(t-i)/i)}return this.asSequence(this.current,t)}}}e.Sequence=class extends o{constructor(t,e,i="linear"){if(super(t,i),this.keyframes=e,this.type="simple",this.taken=[],this.keyframes.forEach(((t,e)=>{t.duration=this.duration;const i=(t=this.passKeyframe(t)).time(this.duration);if(i>this.duration)throw new Error("Keyframe timing overflow");if(this.taken.includes(i))throw new Error("It must not have repeated times");this.taken.push(i),t instanceof a&&(this.type="nested"),this.run.push(t)})),!this.type)throw new Error("No events/keyframes provided");this.keyframes[0];try{this.nextTime()}catch(t){throw new Error("Identical time signatures on keyframes are not allowed on a single animation channel")}}addKeyframe(t){this.keyframes.map((t=>this.passKeyframe(t))).reduce(((t,e)=>t+e.time(this.duration)),0)}asSequence(t,e){}reset(){this.keyframes.forEach((t=>this.run.push(this.passKeyframe(t))))}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},e.ChannelsTimeline=class extends o{constructor(t,e,i="linear"){super(t,i),this.channels=e}asSequence(t,e){}reset(){}}},626:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.passPreset=e.EasingFunctions=void 0;class i{}e.EasingFunctions=i,i.linear=t=>t,i.easeInQuad=t=>t*t,i.easeOutQuad=t=>t*(2-t),i.easeInOutQuad=t=>t<.5?2*t*t:(4-2*t)*t-1,i.easeInCubic=t=>t*t*t,i.easeOutCubic=t=>--t*t*t+1,i.easeInOutCubic=t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,i.easeInQuart=t=>t*t*t*t,i.easeOutQuart=t=>1- --t*t*t*t,i.easeInOutQuart=t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,i.easeInQuint=t=>t*t*t*t*t,i.easeOutQuint=t=>1+--t*t*t*t*t,i.easeInOutQuint=t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,e.passPreset=function(t){return"function"!=typeof t?i[t]:t}},448:(t,e,i)=>{i.r(e),i.d(e,{AlgoFrame:()=>r,Keyframes:()=>s});const n={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:(4-2*t)*t-1,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1- --t*t*t*t,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1+--t*t*t*t*t,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t};class r{constructor(t,e,i,r,a=null,o=!1){if(this.easing="function"!=typeof i?n[i]:i,this.starttime=e||0,this._starttime=this.starttime,this.duration=t,this.startafterwait=null,this.startanimationtime=null,this.stop=!1,this._start=new Promise((t=>this.__start=t)),!(r instanceof s))throw new Error("Invalid Keyframes Object!");this.keyframes=r,this.done=!1,this.next=void 0,this._FPS=a,this.frameDelay=1e3/this._FPS,this.frameRate=0,this.frame=-1,this.animationFrame=-1,this.loop=o}get FPS(){return this._FPS?1e3/this._FPS:null}set FPS(t){const e=parseFloat(t);if(!e)throw new Error("Not a valid Number");this._FPS=e,this.frameDelay=1e3/e}nextTime(t=this._running){return t.length||console.log(new Error),t.reduce(((t,e)=>e.time<t.time?e:t))}save(t,e){this.callback=t,this.precision=e}restartKeyframes(t){this._timeline.forEach((t=>{t.id!==this._current.id&&(t._.keyframes.restart(),t._.keyframes.nextTime(),t.running=!1)}))}restartTimeline(){this._timeline.forEach((t=>this._running.push(t))),this._next=this.nextTime()}timeline(t,e,i){this._timeline=[],this._running=[];let n=[];t.forEach((t=>{if(t.time>=1||t.time<0||isNaN(t.time))throw new Error("Not valid");n.push({_:new r(t.duration,t.delay?t.delay:0,t.easing?t.easing:this.easing,t.keyframes?t.keyframes.clone():this.keyframes.clone(),this._FPS).finally(t.finally),time:t.time,callback:t.run})}));let s=t.reduce(((t,e)=>t+e.duration||0+e.delay||0),0);s/t[t.length-1].time<t[t.length-1].duration&&(this.duration+=t[t.length-1].duration-s/t[t.length-1].time),this.duration<s&&(this.duration=s);const a=n.length;for(let t=0;t<a;t++){const e=this.nextTime(n);e.id=t+1,e._.id=t+1,this._timeline.push(e),n.splice(n.indexOf(this._timeline[t]),1)}this.saved_timeline=this._timeline.map((t=>t.time)),this.restartTimeline();let o=this._next,h=this._timeline.reduce(((t,e)=>e.time>t.time?e:t));return this.reversed=!1,this.callback=function(t,n,r){e(t,n,r);const s=()=>{this._next._.startanimationtime=r.timestamp+this._next._._starttime,this._next._.waiting=!0,this._next._.time=this._next.time,this._next._.run(this._next.callback),this._next.running=!0,this._current=this._next,this._running.shift(),console.log(this._next.time,this._running.map((t=>t.time))),this._running.length&&(this._next=this.nextTime())};if(this._next)n>=this._next.time&&!this._next.running&&s();else{for(console.log("REVERSED"),i&&!this.reversed?this._timeline.forEach(((t,e)=>{t.time=this.saved_timeline[this.saved_timeline.length-(e+1)]-this.nextTime(this.saved_timeline)})):i&&this._timeline.forEach(((t,e)=>t.time=this.saved_timeline[e]));this._running.length;)this._running.shift();this.restartTimeline(),this.restartKeyframes(),i&&!this.reversed&&this._running.reverse(),this.reversed=!this.reversed,o=this._next,h=this._timeline.reduce(((t,e)=>e.time>t.time?e:t)),this._running.shift(),this._next=this.nextTime(),s()}},this}run(t,e=this._FPS){let i,n;this.callback=t||this.callback;class r{constructor(t=1){this.history=new Array(t).fill(0),this.last=0,this.currenttime=0}refresh(t){this.history.unshift(0),this.history.pop(),this.history[0]=t-this.currenttime,this.last=this.history.includes(0)?"Calculating...":this.history.reduce(((t,e)=>t+e))/this.history.length,this.currenttime=t}}return this.last=new r,isNaN(e)&&(console.log(new Error(`${e} is NaN`)),e=this._FPS,isNaN(this.precision)||(e=this.precision)),this.lastFrameRate=this.lastFrameRate?this.lastFrameRate:new r(e),requestAnimationFrame(function t(e){this.done&&(this.frame=-1,this.startanimationtime=e,this.done=!1,this._next=null),this._FPS?(n=Math.floor((e-this.starttime)/this.frameDelay),i=Boolean(n>this.frame)):i=!0,this.last.refresh(e);const r=e-this.startanimationtime;let s=r/this.duration;const a=this.easing(s);if(this.progress=a,this.startanimationtime||0!==this.starttime){if(this.starttime>0)return this.startanimationtime=e,this.starttime=this.starttime-this.last.last<.7*this.last.last?0:this.starttime-this.last.last,void requestAnimationFrame(t.bind(this))}else this.startanimationtime=e;let o=!1;i&&(this.frame=n,this.animationFrame++,this.lastFrameRate.refresh(e),!0,this.callback(this.waiting?0:this.keyframes.test(Math.min(a,1)),Math.min(a,1),{lastFrame:this.lastFrameRate.last,currentTime:this.lastFrameRate.currentTime,frame:this.animationFrame,timestamp:e}),this.waiting=!1),this.stop||(r<this.duration?requestAnimationFrame(t.bind(this)):r+this.last.last>this.duration?(this.animationFrame++,this.keyframes.nextTime(),this.callback(this.keyframes.test(1),1,{lastFrame:this.lastFrameRate.last,currentTime:this.lastFrameRate.currenttime,frame:this.animationFrame,timestamp:e}),this.done=!0,this.keyframes.restart(),this.loop&&requestAnimationFrame(t.bind(this)),this.next?.()):(this.done=!0,this.keyframes.restart(),this.loop&&requestAnimationFrame(t.bind(this)),this.next?.())),0===this.animationFrame&&this.__start()}.bind(this)),this}finally(t){return this.next=t,this}break(){return this.stop=!1,this}listen(t,e){"start"===t&&this._start.then(e)}}class s{constructor(t,e){this.keyframes=[],this.run=[],t.every(((t,e)=>t instanceof s.keyframe&&!this.keyframes.some((e=>e.time===t.time))?(this.keyframes.push(t),!0):(console.error(new Error(`Invalid Keyframe ${e+1}!`)),!1))),this.keyframes.forEach((t=>this.run.push(t))),this.easing="function"!=typeof e?n[e]:e,this.nextTime()}nextTime(){if(!this.run.length)return this.next=null;this.run.length>1?(this.current=this.run.reduce(((t,e)=>e.time<t.time?e:t)),this.next=this.run.filter((t=>t.time!==this.current.time)).reduce(((t,e)=>e.time<t?e:t))):(this.restart(),this.next=this.run.reduce(((t,e)=>e.time<t.time?e:t))),this.run.shift()}restart(){for(;this.run.length;)this.run.pop();this.keyframes.forEach((t=>this.run.push(t)))}test(t){this.next.time<=t&&this.nextTime(),t=Math.min(this.easing(t),1);const e=this.next.val-this.current.val,i=this.next.time-this.current.time,n=e*t;return(this.current.val+n)/i}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}static keyframe=class{constructor(t,e){this.time=t,this.val=e}}}},476:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var o=0;o<this.length;o++){var h=this[o][0];null!=h&&(a[h]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);n&&a[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),i&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=i):l[2]=i),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},559:t=>{t.exports=function(t){var e=t[1],i=t[3];if(!i)return e;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),s="/*# ".concat(r," */");return[e].concat([s]).join("\n")}return[e].join("\n")}},686:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var n=i(559),r=i.n(n),s=i(476),a=i.n(s)()(r());a.push([t.id,"* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n}\r\nhtml {\r\n  --size: 0px;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\nbody {\r\n  background: #ddd;\r\n  place-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,\r\n    Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n}\r\n.HJy2hN7EviyUcpFE_RO7 {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.XGKV_X58VCmx7CDLhhSM {\r\n  margin-bottom: 2rem;\r\n  text-align: center;\r\n}\r\n.HJy2hN7EviyUcpFE_RO7 .Sz1OFum2w231GO8bUb5O {\r\n  position: relative;\r\n  height: 0;\r\n  width: var(--size);\r\n  background-color: cornflowerblue;\r\n  font-size: calc(var(--size) / 4);\r\n  color: #fff;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  transition: background-color 0.3s;\r\n}\r\n.Sz1OFum2w231GO8bUb5O.LLBL1HKPlx9PDYeCOBWb {\r\n  background-color: #ff7675;\r\n  transition: background-color 0.3s;\r\n}\r\n.XGKV_X58VCmx7CDLhhSM p {\r\n  font-size: 2rem;\r\n}\r\n","",{version:3,sources:["webpack://./style2.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,SAAS;AACX;AACA;EACE,WAAW;EACX,YAAY;EACZ,WAAW;AACb;AACA;EACE,gBAAgB;EAChB,qBAAqB;EACrB,aAAa;EACb,mBAAmB;EACnB,sBAAsB;EACtB,YAAY;EACZ,WAAW;EACX;wEACsE;AACxE;AACA;EACE,kBAAkB;EAClB,aAAa;EACb,sBAAsB;EACtB,6BAA6B;EAC7B,WAAW;EACX,WAAW;EACX,YAAY;AACd;AACA;EACE,mBAAmB;EACnB,kBAAkB;AACpB;AACA;EACE,kBAAkB;EAClB,SAAS;EACT,kBAAkB;EAClB,gCAAgC;EAChC,gCAAgC;EAChC,WAAW;EACX,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,iCAAiC;AACnC;AACA;EACE,yBAAyB;EACzB,iCAAiC;AACnC;AACA;EACE,eAAe;AACjB",sourcesContent:["* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n}\r\nhtml {\r\n  --size: 0px;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\nbody {\r\n  background: #ddd;\r\n  place-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  width: 100%;\r\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,\r\n    Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\r\n}\r\n.container {\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.title {\r\n  margin-bottom: 2rem;\r\n  text-align: center;\r\n}\r\n.container .box {\r\n  position: relative;\r\n  height: 0;\r\n  width: var(--size);\r\n  background-color: cornflowerblue;\r\n  font-size: calc(var(--size) / 4);\r\n  color: #fff;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  transition: background-color 0.3s;\r\n}\r\n.box.run {\r\n  background-color: #ff7675;\r\n  transition: background-color 0.3s;\r\n}\r\n.title p {\r\n  font-size: 2rem;\r\n}\r\n"],sourceRoot:""}]),a.locals={container:"HJy2hN7EviyUcpFE_RO7",title:"XGKV_X58VCmx7CDLhhSM",box:"Sz1OFum2w231GO8bUb5O",run:"LLBL1HKPlx9PDYeCOBWb"};const o=a}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={id:n,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}return i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(895)})()));
//# sourceMappingURL=algoframe.js.map