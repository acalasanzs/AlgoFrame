{"version":3,"file":"algoframe.js","mappings":"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","sources":["webpack://AlgoFrame/webpack/universalModuleDefinition","webpack://AlgoFrame/./index.ts","webpack://AlgoFrame/./modules/Timeline.ts","webpack://AlgoFrame/./utils.ts","webpack://AlgoFrame/../node_modules/algoframe/utils.js","webpack://AlgoFrame/../node_modules/algoframe/index.js","webpack://AlgoFrame/webpack/bootstrap","webpack://AlgoFrame/webpack/runtime/define property getters","webpack://AlgoFrame/webpack/runtime/hasOwnProperty shorthand","webpack://AlgoFrame/webpack/runtime/make namespace object","webpack://AlgoFrame/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AlgoFrame\"] = factory();\n\telse\n\t\troot[\"AlgoFrame\"] = factory();\n})(self, () => {\nreturn ","// @ts-ignore\r\nimport * as AF from 'algoframe';\r\nimport * as AFT from './modules/Timeline';\r\n\r\n// Animation engine\r\n\r\nconst delay: number = 500;\r\n\r\nconst unitLinearAnimation = new AF.Keyframes(\r\n  [new AF.Keyframes.keyframe(0, 0), new AF.Keyframes.keyframe(1, 1)],\r\n  'linear'\r\n);\r\n\r\nconst animation = new AF.AlgoFrame(1000, delay, 'linear', unitLinearAnimation);\r\n\r\n// Keyframes\r\n// Needs to allow ratios and miliseconds values on duration\r\nconst keyframes = new AFT.Sequence(500, [\r\n  new AFT.valueKeyframe(0, 0),\r\n  new AFT.valueKeyframe(100, 450, 'miliseconds'),\r\n]);\r\n\r\nanimation.run((x: number) => console.log(keyframes.test(x)));\r\n","import { Preset, EasingFunctions, passPreset } from '../utils';\r\n\r\n// Classes\r\n\r\nclass _keyframe {\r\n  constructor(\r\n    public timing: number,\r\n    public type: 'ratio' | 'miliseconds' = 'ratio'\r\n  ) {}\r\n  time(duration: number): number {\r\n    return this.type === 'miliseconds' ? this.timing : duration * this.timing;\r\n  }\r\n}\r\n\r\nexport class valueKeyframe extends _keyframe {\r\n  constructor(\r\n    public value: number,\r\n    timing: number,\r\n    type: 'ratio' | 'miliseconds' = 'miliseconds'\r\n  ) {\r\n    super(timing, type);\r\n  }\r\n}\r\n// unknown now but maybe a special kind of AlgoFrame + Timeline for nested sequencees! And must fit in the timeline keyframe\r\nexport class nestedKeyframe extends _keyframe {\r\n  constructor(\r\n    public obj: Sequence,\r\n    timing: number,\r\n    type: 'ratio' | 'miliseconds' = 'miliseconds'\r\n  ) {\r\n    super(timing, type);\r\n  }\r\n}\r\n\r\n// Enumerables\r\ntype _simple = valueKeyframe[];\r\ntype _nested = nestedKeyframe[];\r\n\r\n// Anonymous Interfaces\r\nexport type __objectKeyframe = {\r\n  obj: Sequence;\r\n  timing: number;\r\n  type: 'ratio' | 'miliseconds';\r\n};\r\nexport type __valueKeyframe = {\r\n  value: number;\r\n  timing: number;\r\n  type: 'ratio' | 'miliseconds';\r\n};\r\n\r\nabstract class KeyChanger {\r\n  protected duration: number;\r\n  run: (nestedKeyframe | valueKeyframe)[];\r\n  next: (valueKeyframe | nestedKeyframe) | null = null;\r\n  current: (valueKeyframe | nestedKeyframe) | null = null;\r\n  keyframes?: (__valueKeyframe | __objectKeyframe)[];\r\n  testType: 'ratio' | 'miliseconds' = 'ratio';\r\n  easing: (t: number) => number;\r\n\r\n  constructor(duration: number, easing: Preset = 'linear') {\r\n    this.duration = Math.floor(duration);\r\n    this.run = [];\r\n    this.easing = passPreset(easing);\r\n  }\r\n  protected nextTime(): void {\r\n    if (!this.run.length) {\r\n      this.next = null;\r\n      return;\r\n    }\r\n\r\n    if (this.run.length > 1) {\r\n      this.current = this.run.reduce((previousValue, currentValue) => {\r\n        return currentValue!.time(this.duration) <\r\n          previousValue!.time(this.duration)\r\n          ? currentValue\r\n          : previousValue;\r\n      });\r\n      this.next = this.run\r\n        .filter(\r\n          v => v!.time(this.duration) !== this.current!.time(this.duration)\r\n        )\r\n        .reduce((previousValue, currentValue) =>\r\n          currentValue!.time(this.duration) < previousValue!.time(this.duration)\r\n            ? currentValue\r\n            : previousValue\r\n        );\r\n    } else {\r\n      this.restart();\r\n      this.next = this.run.reduce((previousValue, currentValue) =>\r\n        currentValue!.time < previousValue!.time ? currentValue : previousValue\r\n      );\r\n    }\r\n    this.run.shift();\r\n  }\r\n  protected abstract reset(): void;\r\n  protected passKeyframe(k: any | nestedKeyframe | valueKeyframe) {\r\n    if (k instanceof nestedKeyframe || k instanceof valueKeyframe) return k;\r\n    return this.is_value(k)\r\n      ? new valueKeyframe(k.value, k.timing, k.type)\r\n      : new nestedKeyframe(k.obj, k.timing, k.type);\r\n  }\r\n  protected is_value(object: any): object is __valueKeyframe {\r\n    return 'val' in object;\r\n  }\r\n  public restart() {\r\n    while (this.run.length) this.run.pop();\r\n    this.reset();\r\n  }\r\n  // This is called when in this.test(), this.current is of type nestedKeyframe, so treat de return as a nested timeline call.\r\n  protected abstract asSequence(object: nestedKeyframe, progress: number): any;\r\n  test(\r\n    progress: number,\r\n    miliseconds: boolean = false\r\n  ): unknown | number | null {\r\n    if (!miliseconds) progress = progress * this.duration;\r\n    if (this.next && this.current) {\r\n      if (this.next.time(this.duration) <= progress) this.nextTime(); //bug-proof\r\n      if (\r\n        this.next instanceof valueKeyframe &&\r\n        this.current instanceof valueKeyframe\r\n      ) {\r\n        progress = Math.min(this.easing(progress), 1);\r\n        const dif = this.next.value - this.current.value;\r\n        const a =\r\n          this.next.time(this.duration) - this.current.time(this.duration);\r\n        const sum = dif * progress;\r\n        return (this.current.value + sum) / a;\r\n      } else {\r\n        // return (this.current as nestedKeyframe).obj.test(progress - this.current.time);\r\n        return this.asSequence(this.current as nestedKeyframe, progress);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport class Sequence extends KeyChanger {\r\n  type: 'nested' | 'simple' = 'simple';\r\n  constructor(\r\n    duration: number,\r\n    public keyframes: (__valueKeyframe | __objectKeyframe)[],\r\n    easing: Preset = 'linear'\r\n  ) {\r\n    super(duration, easing);\r\n    // Pushes and Checks if all events are of type nestedKeyframe or _keyframe\r\n    this.keyframes.forEach((k: any, i) => {\r\n      k = this.passKeyframe(k);\r\n      if (k instanceof nestedKeyframe) this.type = 'nested';\r\n      this.run.push(k);\r\n    });\r\n    if (!this.type) throw new Error('No events/keyframes provided');\r\n\r\n    if (this.keyframes[0] instanceof valueKeyframe) {\r\n    }\r\n    try {\r\n      this.nextTime();\r\n    } catch {\r\n      throw new Error(\r\n        'Identical time signatures on keyframes are not allowed on a single animation channel'\r\n      );\r\n    }\r\n  }\r\n  protected asSequence(object: nestedKeyframe, progress: number) {\r\n    // return object.obj.test(progress - this.current!.time);\r\n  }\r\n  protected reset(): void {\r\n    this.keyframes.forEach(k => this.run.push(this.passKeyframe(k)));\r\n  }\r\n  clone() {\r\n    let orig = this;\r\n    return Object.assign(Object.create(Object.getPrototypeOf(orig)), orig);\r\n  }\r\n}\r\n\r\nexport class ChannelsTimeline extends KeyChanger {\r\n  //AllRun? to all channels simultaneously\r\n  // Return a nested object of all the results in a given time?\r\n  // So in that case, call every AlgoFrame Sequence/timeline better.\r\n  constructor(\r\n    duration: number,\r\n    public channels: Sequence[], // Main sequences means a whole channel, but all must have the same length in miliseconds. If not, all will be extended to the largest one.\r\n    easing: Preset = 'linear'\r\n  ) {\r\n    super(duration, easing);\r\n  }\r\n  protected asSequence(object: nestedKeyframe, progress: number) {}\r\n  protected reset(): void {}\r\n}\r\n","class EasingFunctions {\r\n  // no easing; no acceleration\r\n  static linear: (t: number) => number = t => t;\r\n  // accelerating from zero velocity\r\n  static easeInQuad: (t: number) => number = t => t * t;\r\n  // decelerating to zero velocity\r\n  static easeOutQuad: (t: number) => number = t => t * (2 - t);\r\n  // acceleration until halfway; then deceleration\r\n  static easeInOutQuad: (t: number) => number = t =>\r\n    t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n  // accelerating from zero velocity\r\n  static easeInCubic: (t: number) => number = t => t * t * t;\r\n  // decelerating to zero velocity\r\n  static easeOutCubic: (t: number) => number = t => --t * t * t + 1;\r\n  // acceleration until halfway; then deceleration\r\n  static easeInOutCubic: (t: number) => number = t =>\r\n    t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n  // accelerating from zero velocity\r\n  static easeInQuart: (t: number) => number = t => t * t * t * t;\r\n  // decelerating to zero velocity\r\n  static easeOutQuart: (t: number) => number = t => 1 - --t * t * t * t;\r\n  // acceleration until halfway; then deceleration\r\n  static easeInOutQuart: (t: number) => number = t =>\r\n    t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\r\n  // accelerating from zero velocity\r\n  static easeInQuint: (t: number) => number = t => t * t * t * t * t;\r\n  // decelerating to zero velocity\r\n  static easeOutQuint: (t: number) => number = t => 1 + --t * t * t * t * t;\r\n  // acceleration until halfway; then deceleration\r\n  static easeInOutQuint: (t: number) => number = t =>\r\n    t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\r\n}\r\ntype Preset = string | ((x: number) => number);\r\nfunction passPreset(preset: Preset) {\r\n  if (typeof preset !== 'function') {\r\n    return EasingFunctions[\r\n      preset as keyof typeof EasingFunctions\r\n    ] as Preset as (t: number) => number;\r\n  } else {\r\n    return preset as (t: number) => number;\r\n  }\r\n}\r\nexport { EasingFunctions, Preset, passPreset };\r\n","export const EasingFunctions = {\r\n  // no easing, no acceleration\r\n  linear: (t) => t,\r\n  // accelerating from zero velocity\r\n  easeInQuad: (t) => t * t,\r\n  // decelerating to zero velocity\r\n  easeOutQuad: (t) => t * (2 - t),\r\n  // acceleration until halfway, then deceleration\r\n  easeInOutQuad: (t) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\r\n  // accelerating from zero velocity\r\n  easeInCubic: (t) => t * t * t,\r\n  // decelerating to zero velocity\r\n  easeOutCubic: (t) => --t * t * t + 1,\r\n  // acceleration until halfway, then deceleration\r\n  easeInOutCubic: (t) =>\r\n    t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\r\n  // accelerating from zero velocity\r\n  easeInQuart: (t) => t * t * t * t,\r\n  // decelerating to zero velocity\r\n  easeOutQuart: (t) => 1 - --t * t * t * t,\r\n  // acceleration until halfway, then deceleration\r\n  easeInOutQuart: (t) =>\r\n    t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\r\n  // accelerating from zero velocity\r\n  easeInQuint: (t) => t * t * t * t * t,\r\n  // decelerating to zero velocity\r\n  easeOutQuint: (t) => 1 + --t * t * t * t * t,\r\n  // acceleration until halfway, then deceleration\r\n  easeInOutQuint: (t) =>\r\n    t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t,\r\n};\r\n","import { EasingFunctions } from './utils';\r\nclass AlgoFrame {\r\n  constructor(\r\n    duration,\r\n    starttime,\r\n    easing,\r\n    keyframes,\r\n    FPS = null,\r\n    loop = false\r\n  ) {\r\n    if (typeof easing !== 'function') {\r\n      this.easing = EasingFunctions[easing];\r\n    } else {\r\n      this.easing = easing;\r\n    }\r\n    this.starttime = starttime ? starttime : 0;\r\n    this._starttime = this.starttime;\r\n    this.duration = duration;\r\n    this.startafterwait = null;\r\n    this.startanimationtime = null;\r\n    this.stop = false;\r\n    this._start = new Promise(res => (this.__start = res));\r\n    if (!(keyframes instanceof Keyframes)) {\r\n      throw new Error('Invalid Keyframes Object!');\r\n    }\r\n    this.keyframes = keyframes;\r\n    this.done = false;\r\n    this.next = undefined;\r\n\r\n    this._FPS = FPS;\r\n    this.frameDelay = 1000 / this._FPS;\r\n    this.frameRate = 0;\r\n    this.frame = -1;\r\n    this.animationFrame = -1;\r\n\r\n    this.loop = loop;\r\n  }\r\n  get FPS() {\r\n    return this._FPS ? 1000 / this._FPS : null;\r\n  }\r\n  set FPS(value) {\r\n    const FPS = parseFloat(value);\r\n    if (FPS) {\r\n      this._FPS = FPS;\r\n      this.frameDelay = 1000 / FPS;\r\n      // this.frame = -1;\r\n      // this.starttime = null;\r\n    } else throw new Error('Not a valid Number');\r\n  }\r\n  nextTime(arr = this._running) {\r\n    if (!arr.length) {\r\n      console.log(new Error());\r\n    }\r\n    return arr.reduce((previousValue, currentValue) =>\r\n      currentValue.time < previousValue.time ? currentValue : previousValue\r\n    );\r\n  }\r\n  save(callback, precision) {\r\n    this.callback = callback;\r\n    this.precision = precision;\r\n  }\r\n  restartKeyframes(t) {\r\n    this._timeline.forEach(t => {\r\n      if (t.id === this._current.id) return;\r\n      t._.keyframes.restart();\r\n      t._.keyframes.nextTime();\r\n      t.running = false;\r\n    });\r\n  }\r\n  restartTimeline() {\r\n    this._timeline.forEach(x => this._running.push(x));\r\n    this._next = this.nextTime();\r\n  }\r\n  timeline(array, real, reverseLoop) {\r\n    this._timeline = [];\r\n    this._running = [];\r\n    let data = [];\r\n    array.forEach(event => {\r\n      if (event.time >= 1 || event.time < 0 || isNaN(event.time)) {\r\n        throw new Error('Not valid');\r\n      }\r\n      data.push({\r\n        _: new AlgoFrame(\r\n          event.duration,\r\n          event.delay ? event.delay : 0,\r\n          event.easing ? event.easing : this.easing,\r\n          event.keyframes ? event.keyframes.clone() : this.keyframes.clone(),\r\n          this._FPS\r\n        ).finally(event.finally),\r\n        time: event.time,\r\n        callback: event.run,\r\n      });\r\n    });\r\n    let all = array.reduce((p, c) => {\r\n      return p + c.duration || 0 + c.delay || 0;\r\n    }, 0);\r\n    if (all / array[array.length - 1].time < array[array.length - 1].duration) {\r\n      this.duration +=\r\n        array[array.length - 1].duration - all / array[array.length - 1].time;\r\n    }\r\n    if (this.duration < all) {\r\n      this.duration = all;\r\n    }\r\n    const len = data.length;\r\n    for (let i = 0; i < len; i++) {\r\n      const cur = this.nextTime(data);\r\n      cur.id = i + 1;\r\n      cur._.id = i + 1;\r\n      this._timeline.push(cur);\r\n      data.splice(data.indexOf(this._timeline[i]), 1);\r\n    }\r\n    this.saved_timeline = this._timeline.map(l => l.time);\r\n    this.restartTimeline();\r\n    let first = this._next;\r\n    let last = this._timeline.reduce((previousValue, currentValue) =>\r\n      currentValue.time > previousValue.time ? currentValue : previousValue\r\n    );\r\n    this.reversed = false;\r\n    this.callback = function (X, easedProgress, params) {\r\n      real(X, easedProgress, params);\r\n      const next = () => {\r\n        this._next._.startanimationtime =\r\n          params.timestamp + this._next._._starttime;\r\n        this._next._.waiting = true;\r\n\r\n        //Parent info\r\n        this._next._.time = this._next.time;\r\n\r\n        this._next._.run(this._next.callback);\r\n        this._next.running = true;\r\n        this._current = this._next;\r\n        this._running.shift();\r\n        console.log(\r\n          this._next.time,\r\n          this._running.map(l => l.time)\r\n        );\r\n        if (this._running.length) {\r\n          this._next = this.nextTime();\r\n        }\r\n      };\r\n      if (this._next) {\r\n        if (easedProgress >= this._next.time && !this._next.running) {\r\n          next();\r\n        }\r\n      } else {\r\n        console.log('REVERSED');\r\n        if (reverseLoop && !this.reversed) {\r\n          this._timeline.forEach((l, i) => {\r\n            l.time =\r\n              this.saved_timeline[this.saved_timeline.length - (i + 1)] -\r\n              this.nextTime(this.saved_timeline);\r\n          });\r\n        } else if (reverseLoop) {\r\n          this._timeline.forEach((l, i) => (l.time = this.saved_timeline[i]));\r\n        }\r\n\r\n        while (this._running.length) this._running.shift();\r\n        this.restartTimeline();\r\n        this.restartKeyframes();\r\n        if (reverseLoop && !this.reversed) this._running.reverse();\r\n        this.reversed = !this.reversed;\r\n        first = this._next;\r\n        last = this._timeline.reduce((previousValue, currentValue) =>\r\n          currentValue.time > previousValue.time ? currentValue : previousValue\r\n        );\r\n        this._running.shift();\r\n        this._next = this.nextTime();\r\n        next();\r\n      }\r\n    };\r\n    return this;\r\n  }\r\n  run(callback, precision = this._FPS) {\r\n    let condition, seg;\r\n    this.callback = callback ? callback : this.callback;\r\n\r\n    class Refresher {\r\n      constructor(precision = 1) {\r\n        this.history = new Array(precision).fill(0);\r\n        this.last = 0;\r\n        this.currenttime = 0;\r\n      }\r\n      refresh(timestamp) {\r\n        this.history.unshift(0);\r\n        this.history.pop();\r\n        this.history[0] = timestamp - this.currenttime;\r\n        this.last = this.history.includes(0)\r\n          ? 'Calculating...'\r\n          : this.history.reduce((prev, curr) => prev + curr) /\r\n            this.history.length;\r\n        this.currenttime = timestamp;\r\n      }\r\n    }\r\n\r\n    this.last = new Refresher();\r\n    if (isNaN(precision)) {\r\n      console.log(new Error(`${precision} is NaN`));\r\n      precision = this._FPS;\r\n      if (!isNaN(this.precision)) precision = this.precision;\r\n    }\r\n    this.lastFrameRate = this.lastFrameRate\r\n      ? this.lastFrameRate\r\n      : new Refresher(precision);\r\n\r\n    function animate(timestamp) {\r\n      if (this.done) {\r\n        this.frame = -1;\r\n        this.startanimationtime = timestamp;\r\n        this.done = false;\r\n        this._next = null;\r\n      }\r\n      if (this._FPS) {\r\n        seg = Math.floor((timestamp - this.starttime) / this.frameDelay);\r\n        condition = Boolean(seg > this.frame);\r\n      } else {\r\n        condition = true;\r\n      }\r\n      this.last.refresh(timestamp);\r\n      const runtime = timestamp - this.startanimationtime;\r\n      let relativeProgress = runtime / this.duration;\r\n      const easedProgress = this.easing(relativeProgress);\r\n      this.progress = easedProgress;\r\n      if (!this.startanimationtime && this.starttime === 0) {\r\n        this.startanimationtime = timestamp;\r\n      } else if (this.starttime > 0) {\r\n        this.startanimationtime = timestamp;\r\n        this.starttime =\r\n          this.starttime - this.last.last < this.last.last * 0.7\r\n            ? 0\r\n            : this.starttime - this.last.last;\r\n        requestAnimationFrame(animate.bind(this));\r\n        return;\r\n      }\r\n      let sent = false;\r\n      if (condition) {\r\n        this.frame = seg;\r\n        this.animationFrame++;\r\n        this.lastFrameRate.refresh(timestamp);\r\n        sent = true;\r\n        this.callback(\r\n          this.waiting ? 0 : this.keyframes.test(Math.min(easedProgress, 1)),\r\n          Math.min(easedProgress, 1),\r\n          {\r\n            lastFrame: this.lastFrameRate.last,\r\n            currentTime: this.lastFrameRate.currentTime,\r\n            frame: this.animationFrame,\r\n            timestamp,\r\n          }\r\n        );\r\n        this.waiting = false;\r\n      }\r\n      if (!this.stop) {\r\n        if (runtime < this.duration) {\r\n          requestAnimationFrame(animate.bind(this));\r\n        } else if (runtime + this.last.last > this.duration) {\r\n          this.animationFrame++;\r\n          this.keyframes.nextTime();\r\n          this.callback(this.keyframes.test(1), 1, {\r\n            lastFrame: this.lastFrameRate.last,\r\n            currentTime: this.lastFrameRate.currenttime,\r\n            frame: this.animationFrame,\r\n            timestamp,\r\n          });\r\n          this.done = true;\r\n          this.keyframes.restart();\r\n          if (this.loop) requestAnimationFrame(animate.bind(this));\r\n          this.next?.();\r\n        } else {\r\n          this.done = true;\r\n          this.keyframes.restart();\r\n          if (this.loop) requestAnimationFrame(animate.bind(this));\r\n          this.next?.();\r\n        }\r\n      }\r\n      if (this.animationFrame === 0) this.__start();\r\n    }\r\n    requestAnimationFrame(animate.bind(this));\r\n    return this;\r\n  }\r\n  finally(callback) {\r\n    this.next = callback;\r\n    return this;\r\n  }\r\n  break() {\r\n    this.stop = false;\r\n    return this;\r\n  }\r\n  listen(type, callback) {\r\n    switch (type) {\r\n      case 'start':\r\n        this._start.then(callback);\r\n        break;\r\n    }\r\n  }\r\n}\r\nclass Keyframes {\r\n  constructor(keyframes, easing) {\r\n    this.keyframes = [];\r\n    this.run = [];\r\n    keyframes.every((keyframe, i) => {\r\n      if (\r\n        !(keyframe instanceof Keyframes.keyframe) ||\r\n        this.keyframes.some(k => k.time === keyframe.time)\r\n      ) {\r\n        console.error(new Error(`Invalid Keyframe ${i + 1}!`));\r\n        return false;\r\n      } else {\r\n        this.keyframes.push(keyframe);\r\n        return true;\r\n      }\r\n    });\r\n    this.keyframes.forEach(k => this.run.push(k));\r\n    if (typeof easing !== 'function') {\r\n      this.easing = EasingFunctions[easing];\r\n    } else {\r\n      this.easing = easing;\r\n    }\r\n    this.nextTime();\r\n  }\r\n  nextTime() {\r\n    if (!this.run.length) {\r\n      return (this.next = null);\r\n    }\r\n\r\n    if (this.run.length > 1) {\r\n      this.current = this.run.reduce((previousValue, currentValue) =>\r\n        currentValue.time < previousValue.time ? currentValue : previousValue\r\n      );\r\n      this.next = this.run\r\n        .filter(v => v.time !== this.current.time)\r\n        .reduce((previousValue, currentValue) =>\r\n          currentValue.time < previousValue ? currentValue : previousValue\r\n        );\r\n    } else {\r\n      this.restart();\r\n      this.next = this.run.reduce((previousValue, currentValue) =>\r\n        currentValue.time < previousValue.time ? currentValue : previousValue\r\n      );\r\n    }\r\n    this.run.shift();\r\n  }\r\n  restart() {\r\n    while (this.run.length) this.run.pop();\r\n    this.keyframes.forEach(k => this.run.push(k));\r\n  }\r\n  test(progress) {\r\n    if (this.next.time <= progress) this.nextTime();\r\n    progress = Math.min(this.easing(progress), 1);\r\n    const dif = this.next.val - this.current.val;\r\n    const a = this.next.time - this.current.time;\r\n    const sum = dif * progress;\r\n    return (this.current.val + sum) / a;\r\n  }\r\n  clone() {\r\n    let orig = this;\r\n    return Object.assign(Object.create(Object.getPrototypeOf(orig)), orig);\r\n  }\r\n  static keyframe = class {\r\n    constructor(totalProgress, value) {\r\n      this.time = totalProgress;\r\n      this.val = value;\r\n    }\r\n  };\r\n}\r\n\r\n// const anim = new AlgoFrame(2500, 2000, \"easeInQuad\", 50, 150);\r\n// anim.run((x) => console.log(x));\r\n\r\nexport { AlgoFrame, Keyframes };\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(895);\n"],"names":["root","factory","exports","module","define","amd","self","unitLinearAnimation","AF","Keyframes","keyframe","animation","AlgoFrame","keyframes","AFT","Sequence","valueKeyframe","run","x","console","log","test","_keyframe","constructor","timing","type","time","duration","this","value","super","nestedKeyframe","obj","KeyChanger","easing","next","current","testType","Math","floor","passPreset","nextTime","length","reduce","previousValue","currentValue","filter","v","restart","shift","passKeyframe","k","is_value","object","pop","reset","progress","miliseconds","min","dif","a","sum","asSequence","forEach","i","push","Error","clone","Object","assign","create","getPrototypeOf","channels","EasingFunctions","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","preset","starttime","FPS","loop","_starttime","startafterwait","startanimationtime","stop","_start","Promise","res","__start","done","undefined","_FPS","frameDelay","frameRate","frame","animationFrame","parseFloat","arr","_running","save","callback","precision","restartKeyframes","_timeline","id","_current","_","running","restartTimeline","_next","timeline","array","real","reverseLoop","data","event","isNaN","delay","finally","all","p","c","len","cur","splice","indexOf","saved_timeline","map","l","first","last","reversed","X","easedProgress","params","timestamp","waiting","reverse","condition","seg","Refresher","history","Array","fill","currenttime","refresh","unshift","includes","prev","curr","lastFrameRate","requestAnimationFrame","animate","Boolean","runtime","relativeProgress","bind","sent","lastFrame","currentTime","break","listen","then","every","some","error","val","static","totalProgress","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","d","definition","key","o","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","r","Symbol","toStringTag"],"sourceRoot":""}