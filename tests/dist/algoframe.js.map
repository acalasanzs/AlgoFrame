{"version":3,"file":"algoframe.js","mappings":"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","sources":["webpack://AlgoFrame/webpack/universalModuleDefinition","webpack://AlgoFrame/./test.ts","webpack://AlgoFrame/./es6/index.js","webpack://AlgoFrame/./es6/timeline/utils.js","webpack://AlgoFrame/./es6/timeline/index.js","webpack://AlgoFrame/./es6/utils.js","webpack://AlgoFrame/././ sync","webpack://AlgoFrame/webpack/bootstrap","webpack://AlgoFrame/webpack/runtime/define property getters","webpack://AlgoFrame/webpack/runtime/hasOwnProperty shorthand","webpack://AlgoFrame/webpack/runtime/make namespace object","webpack://AlgoFrame/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AlgoFrame\"] = factory();\n\telse\n\t\troot[\"AlgoFrame\"] = factory();\n})(self, () => {\nreturn ","import { Animate } from './es6';\r\nconst global = {\r\n  delay: 300,\r\n};\r\nimport {\r\n  _keyframe,\r\n  nestedKeyframe,\r\n  Sequence,\r\n  valueKeyframe,\r\n} from './es6/timeline';\r\nconst basic = new Sequence(false, [\r\n  new valueKeyframe(2222, 0, 'ratio'),\r\n  new valueKeyframe(4444, 0.5, 'ratio'),\r\n  new valueKeyframe(6666, 1, 'ratio'),\r\n]);\r\nconst first = new Sequence(false, [\r\n  new nestedKeyframe(basic.clone(), 0, 'ratio'),\r\n  new nestedKeyframe(basic.clone(), 0.5, 'ratio'),\r\n  new nestedKeyframe(basic.clone(), 1, 'ratio'),\r\n]);\r\nconst second = new Sequence(1000, [\r\n  new nestedKeyframe(first.clone(), 0, 'ratio'),\r\n  new nestedKeyframe(first.clone(), 0.5, 'ratio'),\r\n  new nestedKeyframe(first.clone(), 1, 'ratio'),\r\n]);\r\n\r\nfunction animate() {\r\n  let number = 0;\r\n  return function startAnimation(sequence: Sequence): void {\r\n    number++;\r\n    const animation = new Animate({\r\n      sequence,\r\n      easing: 'linear',\r\n      timing: {\r\n        delay: global.delay,\r\n      },\r\n    });\r\n    animation.run(({ value, ...other }) => {\r\n      console.log('Animation ' + number);\r\n      console.log(value, [...Object.values(other)]);\r\n    });\r\n  };\r\n}\r\nconst start = animate();\r\n// console.log(new ChannelBlock(second, 100).end());\r\nconsole.log(second, second.duration, 'duration');\r\n\r\nconst custom = 3 || 12;\r\nlet time = 2;\r\nconst getNewK = ({ duration }: { duration: number }) => {\r\n  time++;\r\n  return new valueKeyframe(\r\n    2222 * (((time % 3) / 3) * 3 + 1),\r\n    duration + 1,\r\n    'miliseconds',\r\n    200\r\n  );\r\n};\r\nfor (let i = 0; i < custom; i++) {\r\n  second.addKeyframes('push', getNewK(second));\r\n}\r\n\r\n// second.reset();\r\nconsole.log(\r\n  second.duration,\r\n  'duration',\r\n  second.keyframes.map(k => [k.time(1), k.duration])\r\n);\r\nconsole.log(\r\n  second\r\n    .addKeyframes('push', getNewK({ duration: second.duration + 200 }))\r\n    .keyframes.map(k => [k.time(1), k.duration])\r\n);\r\n\r\nconsole.error('FROM HERE');\r\n\r\n// keyframes deep clone DONE\r\nconst display = (seq: Sequence) =>\r\n  seq.keyframes.map(k => [k.time(k.duration), k.duration, k]);\r\n\r\n// second.extendToSequence(second.clone(), { mode: 'shift' });\r\nconsole.log(display(second));\r\n// second.restart();\r\nstart(second);\r\n/* let val = 0;\r\nwhile (++val < 1000) {\r\n  console.log(second.test(val / 1000));\r\n} */\r\n","import { Framer, Controller, Animator, Refresher, passPreset, } from \"./utils\";\nexport class Animate {\n    constructor(options) {\n        // Frame properties\n        this.frame = new Framer();\n        this.control = new Controller();\n        this.progress = 0;\n        // Engine\n        this.engine = new Animator(this);\n        const { sequence, easing, controls, timing } = options;\n        this.engine.easing = passPreset(easing ? easing : \"linear\");\n        this.frame.sequence = sequence;\n        if (controls === null || controls === void 0 ? void 0 : controls.FPS)\n            this.frame.FPS = controls.FPS; // also implicitily declares Framer._precision\n        if (controls === null || controls === void 0 ? void 0 : controls.loop)\n            this.control.loop = controls.loop;\n        this.frame.start.time = timing.delay;\n        this.frame.duration = timing.duration || sequence.duration;\n    }\n    finally(callback) {\n        this.control.finally = callback;\n        return this;\n    }\n    break() {\n        this.control.stop = false;\n        return this;\n    }\n    precision(value) {\n        this.frame.precision = value;\n        return this;\n    }\n    run(callback) {\n        let condition, seg;\n        if (callback) {\n            this.control.callback = callback;\n        }\n        if (!this.control.callback)\n            throw new Error(\"Main callback is required for the animation\");\n        this.frame.last.time = new Refresher();\n        this.frame.last.frameRate = this.frame.last.frameRate\n            ? this.frame.last.frameRate\n            : new Refresher(this.frame.precision);\n        function refresh(timestamp) {\n            if (this.control.completed) {\n                this.frame.frame = -1;\n                this.frame.start.animationTime = timestamp;\n                this.control.completed = !this.control.completed;\n            }\n            if (this.frame._FPS) {\n                seg = Math.floor((timestamp - this.frame.start.time) / this.frame.delay);\n                condition = Boolean(seg > this.frame.count);\n            }\n            else {\n                condition = true;\n            }\n            this.frame.last.time.refresh(timestamp);\n        }\n        function animate(timestamp) {\n            refresh.call(this, timestamp);\n            let runtime, relativeProgress, easedProgress;\n            if (this.frame.start.animationTime) {\n                runtime = timestamp - this.frame.start.animationTime;\n                relativeProgress = runtime / this.frame.duration;\n                easedProgress = this.engine.easing(relativeProgress);\n                this.progress = easedProgress;\n                this.engine.engine({\n                    relativeProgress,\n                    easedProgress,\n                    runtime,\n                    timestamp,\n                    seg,\n                    condition,\n                    requestAnimation: animate,\n                });\n            }\n            else if (this.frame.start.time > 0) {\n                this.frame.start.animationTime = timestamp;\n                let last = 0;\n                if (typeof this.frame.last.time.last === \"number\") {\n                    last = this.frame.last.time.last;\n                }\n                this.frame.start.time =\n                    this.frame.start.time - last < last * 0.7\n                        ? 0\n                        : this.frame.start.time - last;\n                requestAnimationFrame(animate.bind(this));\n                return;\n            }\n        }\n        requestAnimationFrame(animate.bind(this));\n        return this;\n    }\n}\nclass AlgoFrame {\n    constructor() { }\n}\n","export function timeIntervals(blocks) {\n    let max = 1;\n    let min = 0;\n    const intervals = blocks.map((block, i) => {\n        let kDuration = 0;\n        function tstart(block) {\n            return block.start ? block.start : 0 + block.time();\n        }\n        const time = tstart(block);\n        if (i < blocks.length - 1) {\n            kDuration = tstart(blocks[i + 1]) - time - 1;\n            if (kDuration < block.delay) {\n                throw new Error('Sequences/_keyframe(s) overlapping on the same channel!');\n            }\n        }\n        const end = block.start ? block.start : 0 + time + kDuration;\n        max = max < end ? end : max;\n        min = min > time ? time : min;\n        return [time, end];\n    });\n    return { max, min };\n}\nexport function replicate(obj) {\n    return Object.assign(Object.create(Object.getPrototypeOf(obj)), obj);\n}\nexport function ratioAndMilisecons(ratio, miliseconds, duration) {\n    /**\n     * @param ratio - The ratio of the basic measure, between 0 and 1\n     * @param miliseconds - Miliseconds to delay on the ratio\n     * @param duration - Total duration of the sequence\n     * @returns The arithmetic sum with all parameters in miliseconds\n     */\n    return ratio * duration + miliseconds;\n}\nclass _keyframe {\n    constructor(timing, type = 'ratio', delay = 0, hold = false, start = 0) {\n        this.timing = timing;\n        this.type = type;\n        this.delay = delay;\n        this.hold = hold;\n        this.start = start;\n        if (start < 0) {\n            throw new RangeError('Negative start times are not implemented yet');\n        }\n        this.id = _keyframe.instances++;\n        if (this.type === 'miliseconds') {\n            this.duration = 0;\n        }\n    }\n    time(duration = this.duration) {\n        let timing = this.timing;\n        if (this.delay) {\n            if (typeof this.duration !== 'number')\n                throw new Error('Keyframe with delay has to have duration setted');\n            timing =\n                this.type === 'ratio'\n                    ? ratioAndMilisecons(timing, this.delay, this.duration)\n                    : timing + this.delay;\n        }\n        if (typeof this.duration !== 'number')\n            throw new Error('Need to set this.duration to each keyframe in the keyframes manager');\n        // if (this.type === 'miliseconds' && !this.duration) console.log(this);\n        return this.type === 'miliseconds'\n            ? timing / (this.duration === 0 ? 1 : this.duration / duration)\n            : duration * timing;\n    }\n}\n_keyframe.instances = 0;\nexport { _keyframe };\nexport class valueKeyframe extends _keyframe {\n    constructor(value, timing, type = 'miliseconds', delay, hold = false) {\n        super(timing, type, delay, hold);\n        this.value = value;\n    }\n}\n// unknown now but maybe a special kind of AlgoFrame + Timeline for nested sequencees! And must fit in the timeline keyframe\nexport class nestedKeyframe extends _keyframe {\n    constructor(obj, timing, type = 'miliseconds', delay) {\n        super(timing, type, delay);\n        this.obj = obj;\n    }\n}\n// Enumerables\n// export type SimpleKeyframes = BaseKeyframe[];\n// export type ComplexKeyframes = ObjectKeyframe[];\nexport function isSimple(object) {\n    return 'value' in object && object instanceof _keyframe;\n}\nexport function isComplex(object) {\n    return 'obj' in object && object instanceof _keyframe;\n}\n","import { passPreset } from \"../utils\";\nimport { nestedKeyframe, valueKeyframe, isComplex, isSimple, timeIntervals, replicate,\n// BaseKeyframe,\n } from \"./utils\";\nexport * from \"./utils\";\n// Classes\nexport class KeyChanger {\n    constructor(duration, easing = \"linear\", keyframes) {\n        this.keyframes = keyframes;\n        this.next = null;\n        this.current = null;\n        this.adaptative = false;\n        this.object = Symbol();\n        this.duration =\n            typeof duration === \"number\"\n                ? Math.floor(duration)\n                : ((_) => {\n                    this.adaptative = true;\n                    return 1;\n                })();\n        this.run = [];\n        this.easing = passPreset(easing);\n        this.init(keyframes);\n    }\n    nextTime() {\n        var _a;\n        if (!this.run.length) {\n            this.next = null;\n            return;\n        }\n        if (this.run.length > 1) {\n            this.current = this.run.reduce((previousValue, currentValue) => {\n                return currentValue.time(this.duration) <\n                    previousValue.time(this.duration)\n                    ? currentValue\n                    : previousValue;\n            });\n            this.next =\n                this.run\n                    .filter((v) => v.time(this.duration) !== this.current.time(this.duration))\n                    .reduce((previousValue, currentValue) => currentValue.time(this.duration) <\n                    previousValue.time(this.duration)\n                    ? currentValue\n                    : previousValue) || this.current;\n            // console.log(this.current?.time(1), this.next.time(1), this.run);\n        }\n        else {\n            this.restart();\n        }\n        (_a = this.changer) === null || _a === void 0 ? void 0 : _a.call(this);\n        this.run.shift();\n    }\n    restart() {\n        while (this.run.length)\n            this.run.pop();\n        this.reset();\n    }\n    // This is called when in this.test(), this.current is of type nestedKeyframe, so treat de return as a nested timeline call.\n    currentAsSequence(object, progress, end) {\n        // console.log((progress - object.time(1)) / (end - object.time(1)));\n        const rProgress = (progress - object.time(1)) / (end - object.time(1));\n        let res;\n        if (rProgress <= 1) {\n            // console.log(object.obj);\n            res = object.obj.test(rProgress, undefined, true);\n            return res;\n        }\n    }\n    static lerp(x, y, a) {\n        const lerp = x * (1 - a) + y * a;\n        return lerp;\n    }\n    test(progress, miliseconds = false, runAdaptative = false, nextValue) {\n        if (progress < 0)\n            debugger;\n        progress = progress <= 1 ? progress : 1;\n        let next = nextValue ? nextValue : this.next;\n        if (this.adaptative && !runAdaptative) {\n            throw new Error(\"Adaptitive timed sequences cannot be played in first place\");\n        }\n        if (miliseconds && !runAdaptative)\n            progress = progress * this.duration;\n        else if (miliseconds)\n            throw new Error(\"miliseconds mode not allowe when adaptative\");\n        if (next && this.current) {\n            while (next.time(1) <= progress && !(next.time(1) === 1)) {\n                this.nextTime(); //bug-proof\n                next = this.next;\n            }\n            if (isSimple(next) && isSimple(this.current)) {\n                progress = Math.min(this.easing(progress), miliseconds ? this.duration : 1);\n                const a = next.time(1) - this.current.time(1);\n                const trace = progress / a;\n                const kProgress = progress < progress - a\n                    ? trace\n                    : (progress - this.current.time(1)) / a;\n                // console.log(String([this.current.time(1), next.time(1)]));\n                const lerp = KeyChanger.lerp(this.current.value, next.value, next.hold ? 0 : kProgress);\n                // debugger;\n                // console.log(this.current, next);\n                return lerp;\n            }\n            else if (isComplex(next) && isSimple(this.current)) {\n                // return (this.current as nestedKeyframe).obj.test(progress - this.current.time);\n                const nextValueFromObj = new valueKeyframe(this.getAbsoluteStartValue(next.obj), next.time(1), \"ratio\");\n                nextValueFromObj.duration = this.duration;\n                return this.test(progress, undefined, undefined, nextValueFromObj\n                // this.next.obj.run[0].value\n                );\n            }\n            else if (isComplex(this.current) && isComplex(next)) {\n                // this.nextTime();\n                // debugger;\n                const res = this.currentAsSequence(this.current, progress, this.next ? this.next.time(1) : 1);\n                return res;\n            }\n            else if (isComplex(this.current) && (isSimple(next) || !next)) {\n                // console.log(progress.toFixed(2));\n                return this.currentAsSequence(this.current, progress, next ? next.time(1) : 1);\n            }\n        }\n    }\n    getAbsoluteStartValue(sequence) {\n        let last = sequence.current;\n        while (last instanceof nestedKeyframe) {\n            last = sequence.current;\n        }\n        return last.value;\n    }\n    getAbsoluteEndKeyframe(sequence) {\n        let last = sequence.run[sequence.run.length - 1];\n        while (last instanceof nestedKeyframe) {\n            last = sequence.run[sequence.run.length - 1];\n        }\n        return last;\n    }\n}\n// TODO:\n// 1. Nested Sequence instances DONE\n//    Adaptative Sequence duration DONE\n// P.D.: That's not the as AlgoFrame.timeline, which each timing 'sequence' has its own function rather a numeric value in a Sequence\nexport class Sequence extends KeyChanger {\n    constructor(duration, keyframes, easing = \"linear\", callback = null) {\n        super(duration, easing, keyframes);\n        this.keyframes = keyframes;\n        this.callback = callback;\n        this.type = \"simple\";\n        this.taken = [];\n        // Pushes and Checks if all events are of type nestedKeyframe or _keyframe\n    }\n    init(keyframes) {\n        // if (window['debug']) debugger;\n        this.type = \"simple\";\n        keyframes.forEach((k) => {\n            if (k.type == \"ratio\") {\n                k.timing = k.timing * this.duration;\n                k.type = \"miliseconds\";\n            }\n        });\n        this.taken = [];\n        const zero = keyframes[0];\n        const final = keyframes[keyframes.length - 1];\n        zero.duration = this.duration;\n        final.duration = this.duration;\n        if (zero.time(1) > 0) {\n            // this.taken.push(0);\n            const first = zero instanceof valueKeyframe\n                ? new valueKeyframe(zero.value, 0)\n                : new nestedKeyframe(zero.obj, 0);\n            first.duration = this.duration;\n            this.keyframes.unshift(first);\n            this.run.push(first);\n        }\n        if (final.time(1) < 1) {\n            if (final instanceof nestedKeyframe)\n                throw new Error(\"Cannot set last keyframe as nested sequence, it's impossible\");\n            const last = new valueKeyframe(final.value, 1, \"ratio\");\n            last.duration = this.duration;\n            this.keyframes.push(last);\n            this.run.push(last);\n        }\n        this.keyframes.forEach((k, i) => {\n            k.duration = this.duration;\n            k = k;\n            const timing = k.time(this.duration);\n            if (timing > this.duration)\n                throw new Error(\"Keyframe timing overflow\");\n            if (this.taken.includes(timing))\n                throw new Error(\"It must not have repeated times\");\n            this.taken.push(k.time(1));\n            if (k instanceof nestedKeyframe)\n                this.type = \"nested\";\n            this.run.push(k);\n        });\n        if (!this.type)\n            throw new Error(\"No events/keyframes provided\");\n        if (this.keyframes[0] instanceof valueKeyframe) {\n        }\n        try {\n            this.nextTime();\n        }\n        catch (_a) {\n            throw new Error(\"Identical time signatures on keyframes are not allowed on a single animation channel\");\n        }\n    }\n    static passKeyframe(k) {\n        if (k instanceof nestedKeyframe || k instanceof valueKeyframe)\n            return k;\n        return this.is_value(k)\n            ? new valueKeyframe(k.value, k.timing, k.type)\n            : new nestedKeyframe(k.obj, k.timing, k.type);\n    }\n    static is_value(object) {\n        return \"val\" in object;\n    }\n    addKeyframes(\n    /**\n     * Adds a new keyframe to the entire set,\n     *\n     * @remarks\n     * To apply new keyframes, must do .reset() before\n     *\n     * @param keyframe - A valid AlgoFrame's keyframe object\n     */\n    method = \"push\", ...keyframes) {\n        keyframes.forEach((keyframe) => {\n            const nkeyframe = Sequence.passKeyframe(keyframe);\n            this.keyframes[method](nkeyframe);\n        });\n        const { max: duration } = timeIntervals(this.keyframes);\n        this.keyframes.forEach((k) => {\n            if (k.type == \"ratio\") {\n                k.timing = k.timing * duration;\n                k.type = \"miliseconds\";\n            }\n        });\n        this.duration = duration;\n        this.init(this.keyframes);\n        return this;\n    }\n    extendToSequence(seq, safe) {\n        if (seq.object === this.object)\n            throw new Error(\"Cannot reextend to my own self\");\n        let safePad = safe.value * 2;\n        safePad = safePad ? safePad : 0;\n        if (safePad) {\n            seq.duration += 1;\n        }\n        seq.keyframes.forEach((k, i) => {\n            const safing = i < seq.keyframes.length - 1 ? 1 : 0;\n            const safeOffset = safePad ? safing : 0;\n            k.timing =\n                k.timing +\n                    (k.duration + this.duration + safeOffset * safePad) *\n                        (k.duration / (this.duration + k.duration));\n            k.duration += this.duration;\n            if (!safing && safe) {\n                k.timing += 1;\n            }\n        });\n        if (safe && !safePad) {\n            // safeShift\n            this.keyframes.pop();\n        }\n        this.keyframes.forEach((k) => {\n            k.duration += this.duration;\n        });\n        this.keyframes.forEach((k) => {\n            console.log(k.duration);\n        });\n        /*     const display = (seq: Sequence) =>\n          seq.keyframes.map(k => [k.time(k.duration), k.duration]);\n        console.log(display(seq), display(this)); */\n        this.addKeyframes(\"push\", ...seq.keyframes);\n        return this;\n    }\n    reset() {\n        this.keyframes.forEach((k) => this.run.push(k));\n    }\n    clone() {\n        const keyframes = this.keyframes.map((k) => {\n            if (isComplex(k)) {\n                const copy = replicate(k);\n                copy.obj = copy.obj.clone();\n                return copy;\n            }\n            return replicate(k);\n        });\n        let copy = new Sequence(this.duration, keyframes, this.easing, this.callback);\n        return copy;\n    }\n}\n","class EasingFunctions {\n}\n// no easing; no acceleration\nEasingFunctions.linear = (t) => t;\n// accelerating from zero velocity\nEasingFunctions.easeInQuad = (t) => t * t;\n// decelerating to zero velocity\nEasingFunctions.easeOutQuad = (t) => t * (2 - t);\n// acceleration until halfway; then deceleration\nEasingFunctions.easeInOutQuad = (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n// accelerating from zero velocity\nEasingFunctions.easeInCubic = (t) => t * t * t;\n// decelerating to zero velocity\nEasingFunctions.easeOutCubic = (t) => --t * t * t + 1;\n// acceleration until halfway; then deceleration\nEasingFunctions.easeInOutCubic = (t) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n// accelerating from zero velocity\nEasingFunctions.easeInQuart = (t) => t * t * t * t;\n// decelerating to zero velocity\nEasingFunctions.easeOutQuart = (t) => 1 - --t * t * t * t;\n// acceleration until halfway; then deceleration\nEasingFunctions.easeInOutQuart = (t) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t;\n// accelerating from zero velocity\nEasingFunctions.easeInQuint = (t) => t * t * t * t * t;\n// decelerating to zero velocity\nEasingFunctions.easeOutQuint = (t) => 1 + --t * t * t * t * t;\n// acceleration until halfway; then deceleration\nEasingFunctions.easeInOutQuint = (t) => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t;\nexport { EasingFunctions };\nexport function passPreset(preset) {\n    if (typeof preset !== \"function\") {\n        return EasingFunctions[preset];\n    }\n    else {\n        return preset;\n    }\n}\nexport class Framer {\n    constructor() {\n        this._FPS = null;\n        this.rate = 0;\n        this.count = -1; // this.frame\n        this.frame = -1; // this.animationFrame\n        this._precision = 30;\n        this.start = new Initiator();\n    }\n    set precision(value) {\n        value = Math.abs(value);\n        this._precision = value;\n    }\n    get precision() {\n        return this._precision || this._FPS;\n    }\n    set FPS(value) {\n        try {\n            value = Math.abs(value);\n            this._FPS = value;\n        }\n        catch (_a) { }\n    }\n    get FPS() {\n        return this._FPS ? 1000 / this._FPS : null;\n    }\n    get delay() {\n        if (!this._FPS)\n            throw new Error(\"Not initialized\");\n        return 1000 / this._FPS;\n    }\n}\nexport class Initiator {\n    constructor() {\n        // Refers to this.start___ whatever\n        this.time = 0;\n        this.afterWait = null;\n        this.animationTime = null;\n    }\n}\nexport class Controller {\n    constructor() {\n        this.stop = false;\n        this.__start = new Promise((resolve) => (this._start = resolve));\n        this.loop = false;\n    }\n    get completed() {\n        return this._completed || !this.stop;\n    }\n    set completed(value) {\n        this._completed = value;\n    }\n}\nexport class Refresher {\n    constructor(precision = 1) {\n        this.history = new Array(precision).fill(0);\n        this.last = 0;\n        this.currenttime = 0;\n    }\n    refresh(timestamp) {\n        this.history.unshift(0);\n        this.history.pop();\n        this.history[0] = timestamp - this.currenttime;\n        this.last = this.history.includes(0)\n            ? \"Calculating...\"\n            : this.history.reduce((prev, curr) => prev + curr) / this.history.length;\n        this.currenttime = timestamp;\n    }\n}\nexport class Animator {\n    constructor(origin) {\n        this.origin = origin;\n    }\n    engine(parameters) {\n        var _a, _b, _c, _d;\n        let sent = false;\n        function send() {\n            sent = true;\n            self.frame.value = self.frame.sequence.test(Math.min(parameters.easedProgress, 1));\n            self.control.callback(self.frame);\n        }\n        let self = this.origin;\n        if (parameters.condition) {\n            self.frame.count = parameters.seg;\n            self.frame.start.animationTime =\n                typeof self.frame.start.animationTime === \"number\"\n                    ? self.frame.start.animationTime + 1\n                    : self.frame.start.animationTime;\n            self.frame.last.frameRate.refresh(parameters.timestamp);\n            send();\n        }\n        if (!self.stop) {\n            if (parameters.runtime < self.duration) {\n                requestAnimationFrame(parameters.requestAnimation.bind(self));\n            }\n            else if (parameters.runtime + self.last.last > self.duration) {\n                self.animationFrame++;\n                send();\n                self.control.completed = true;\n                // debugger;\n                if (self.loop)\n                    requestAnimationFrame(parameters.requestAnimation.bind(self));\n                (_b = (_a = self.control).finally) === null || _b === void 0 ? void 0 : _b.call(_a);\n            }\n            else if (!self.done) {\n                self.control.completed = true;\n                if (self.loop)\n                    requestAnimationFrame(parameters.requestAnimation.bind(self));\n                (_d = (_c = self.control).finally) === null || _d === void 0 ? void 0 : _d.call(_c);\n            }\n        }\n        if (self.animationFrame === 0)\n            self.__start();\n    }\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 387;\nmodule.exports = webpackEmptyContext;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(503);\n"],"names":["root","factory","exports","module","define","amd","self","basic","Sequence","valueKeyframe","first","nestedKeyframe","clone","second","start","number","sequence","Animate","easing","timing","delay","run","value","other","console","log","Object","values","animate","duration","time","getNewK","i","addKeyframes","keyframes","map","k","error","constructor","options","this","frame","control","progress","engine","controls","FPS","loop","finally","callback","break","stop","precision","condition","seg","Error","refresh","timestamp","completed","animationTime","_FPS","Math","floor","Boolean","count","last","frameRate","requestAnimationFrame","runtime","relativeProgress","easedProgress","call","requestAnimation","bind","timeIntervals","blocks","max","min","block","kDuration","tstart","length","end","replicate","obj","assign","create","getPrototypeOf","ratioAndMilisecons","ratio","miliseconds","_keyframe","type","hold","RangeError","id","instances","super","isSimple","object","isComplex","KeyChanger","next","current","adaptative","Symbol","_","init","nextTime","_a","reduce","previousValue","currentValue","filter","v","restart","changer","shift","pop","reset","currentAsSequence","rProgress","res","test","undefined","static","x","y","a","runAdaptative","nextValue","kProgress","lerp","nextValueFromObj","getAbsoluteStartValue","getAbsoluteEndKeyframe","taken","forEach","zero","final","unshift","push","includes","is_value","method","keyframe","nkeyframe","passKeyframe","extendToSequence","seq","safe","safePad","safing","safeOffset","copy","EasingFunctions","passPreset","preset","linear","t","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","Framer","rate","_precision","Initiator","abs","afterWait","Controller","__start","Promise","resolve","_start","_completed","Refresher","history","Array","fill","currenttime","prev","curr","Animator","origin","parameters","_b","_c","_d","sent","send","animationFrame","done","webpackEmptyContext","req","e","code","keys","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","d","definition","key","o","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","r","toStringTag"],"sourceRoot":""}