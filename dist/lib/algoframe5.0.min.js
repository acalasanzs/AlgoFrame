"use strict";(()=>{var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var O=q(s=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});s.Animator=s.Refresher=s.Controller=s.Initiator=s.Framer=s.passPreset=s.EasingFunctions=void 0;var i=class{};i.linear=t=>t;i.easeInQuad=t=>t*t;i.easeOutQuad=t=>t*(2-t);i.easeInOutQuad=t=>t<.5?2*t*t:-1+(4-2*t)*t;i.easeInCubic=t=>t*t*t;i.easeOutCubic=t=>--t*t*t+1;i.easeInOutCubic=t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1;i.easeInQuart=t=>t*t*t*t;i.easeOutQuart=t=>1- --t*t*t*t;i.easeInOutQuart=t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t;i.easeInQuint=t=>t*t*t*t*t;i.easeOutQuint=t=>1+--t*t*t*t*t;i.easeInOutQuint=t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t;s.EasingFunctions=i;function T(t){return typeof t!="function"?i[t]:t}s.passPreset=T;var g=class{constructor(){this._FPS=null,this.count=-1,this.frame=-1,this._precision=30,this.last={time:void 0,frameRate:void 0},this.start=new d,this.progress=0}set precision(e){e=Math.abs(e),this._precision=e}get precision(){return this._precision||this._FPS}set FPS(e){try{e=Math.abs(e),this._FPS=e}catch(r){}}get FPS(){return this._FPS?1e3/this._FPS:null}get delay(){if(!this._FPS)throw new Error("Not initialized");return 1e3/this._FPS}stats(){return{value:this.value,FPS:this.FPS,progress:this.progress,currentTime:this.last.frameRate.currenttime,frame:this.frame,duration:this.duration,startTime:this.start.animationTime,timeDelayed:this.start.time,frameRate:this.last.frameRate.last}}};s.Framer=g;var d=class{constructor(){this.time=0,this.afterWait=null,this.animationTime=null}};s.Initiator=d;var y=class{constructor(){this.stop=!1,this.__start=new Promise(e=>this._start=e),this._completed=!1,this.loop=!1,this.sent=!1}get completed(){return this._completed||this.stop}set completed(e){this._completed=e}};s.Controller=y;var P=class{constructor(e=1){this.history=new Array(e).fill(0),this.last=0,this.currenttime=0}refresh(e){this.history.unshift(0),this.history.pop(),this.history[0]=e-this.currenttime,this.last=this.history.includes(0)?"Calculating...":this.history.reduce((r,o)=>r+o)/this.history.length,this.currenttime=e}};s.Refresher=P;var b=class{constructor(e){this.origin=e}engine(e){let r=this.origin}};s.Animator=b});var I=q(l=>{Object.defineProperty(l,"__esModule",{value:!0});l.Animate=l.sensibility=void 0;var f=O();l.sensibility=.9;var F=class{constructor(e){this.frame=new f.Framer,this.control=new f.Controller,this.progress=0,this.engine=new f.Animator(this);let{sequence:r,easing:o,controls:a,timing:h}=e;this.engine.easing=(0,f.passPreset)(o||"linear"),this.frame.sequence=r,a!=null&&a.FPS&&(this.frame.FPS=a.FPS),a!=null&&a.loop&&(this.control.loop=a.loop),this.frame.start.time=h.delay,this.frame.duration=h.duration||r.duration}finally(e){return this.control.finally=e,this}break(){return this.control.stop=!1,this}precision(e){return this.frame.precision=e,this}run(e){let r,o;if(e&&(this.control.callback=e),!this.control.callback)throw new Error("Main callback is required for the animation");this.frame.last.time=new f.Refresher,this.frame.last.frameRate=this.frame.last.frameRate?this.frame.last.frameRate:new f.Refresher(this.frame.precision);function a(n){this.control.completed&&(this.frame.frame=-1,this.frame.start.animationTime=n,this.control.completed=!1),this.frame._FPS?(o=Math.floor((n-this.frame.start.time)/this.frame.delay),r=o>this.frame.count):r=!0,this.frame.last.time.refresh(n)}function h(n){var S,p,v,_;a.call(this,n);let m=null,w=null,c=null;this.control.sent=!1;let R=()=>{this.control.sent=!0,this.frame.value=this.frame.sequence.test(Math.min(c,1)),this.control.callback(this.frame.stats())};if(this.frame.start.animationTime&&(m=n-this.frame.start.animationTime,w=m/this.frame.duration,c=this.engine.easing(w),this.progress=Math.min(c,1),this.frame.progress=Math.min(c,1)),!this.frame.start.animationTime&&this.frame.start.time===0)this.frame.start.animationTime=n;else if(this.frame.start.time>0){this.frame.start.animationTime=n;let u=0;typeof this.frame.last.time.last=="number"&&(u=this.frame.last.time.last),this.frame.start.time=this.frame.start.time-u<u*l.sensibility?0:this.frame.start.time-u,requestAnimationFrame(h.bind(this));return}r&&(this.frame.count=o,this.frame.frame++,this.frame.last.frameRate.refresh(n),R()),this.control.stop||(m&&m<this.frame.duration?requestAnimationFrame(h.bind(this)):m&&m+(typeof this.frame.last.time.last=="number"?this.frame.last.time.last:0)>this.frame.duration?(this.frame.frame++,R(),this.control.completed=!0,this.control.loop&&requestAnimationFrame(h.bind(this)),(p=(S=this.control).finally)===null||p===void 0||p.call(S)):this.control.completed||(this.control.completed=!0,this.control.loop&&requestAnimationFrame(h.bind(this)),(_=(v=this.control).finally)===null||_===void 0||_.call(v))),this.frame.frame===0&&this.control._start()}return requestAnimationFrame(h.bind(this)),this}};l.Animate=F});I();})();
